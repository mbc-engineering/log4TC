<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Benutzung von Loggern | Dokumentation mbc Log4Tc </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Benutzung von Loggern | Dokumentation mbc Log4Tc ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="benutzung-von-loggern">Benutzung von Loggern</h1>

<h2 id="zweck-von-logger">Zweck von <em>Logger</em></h2>
<p>Rein technisch betrachtet ist ein <em>Logger</em> eine Bezeichnung für eine oder mehrere Log-Meldungen, das durch das gesamte Logging-System weitergereicht wird. Ein <em>Logger</em> kann daher z.B. von Filterplugins verwendet werden oder bei der Ausgabe mit geschrieben werden.</p>
<p>Wie genau und ob <em>Logger</em> benutzt werden, kann vom Entwickler selbst definiert werden. Bei allen grösseren Projekten hat sich folgende Richtlinie als Vorteil erwiesen:</p>
<p><em>Logger</em> kennzeichnen Bereiche einer Applikation, der Log-Meldungen zugeordnet werden. Ein Bereich einer Applikation ist z.B. ein Baustein, Methode oder Namensraum (bei Libraries) die mit einem hierarchisch aufgebauten Namen gekennzeichnet werden. Die einzelnen Teile eines solchen Namens werden durch einen Punkt &quot;.&quot; getrennt.</p>
<p>Beispiele:</p>
<ul>
<li>Eine Methode eines Libraries-Bausteins: <code>MyLib.PRG_Foo.Init</code> (<code>MyLib</code>=Librarynamen, <code>PRG_Foo</code>=Bautein, <code>Init</code>=Methode)</li>
<li>Ein Baustein in einem Subsystem: <code>Communication.FB_Send</code> (<code>Communication</code>=Subsystem, <code>FB_Send</code>=Baustein)</li>
</ul>
<p>Durch die hierarchiesche Gliederung können Log-Meldungen auch bei grossen Systemen mit Hunderten oder Tausenden Log-Meldungen schnell zugeordnet werden. Ebenso können z.B. auch einfach Meldungen eines Subsystems ausgefiltert oder in eine eigene Log-Datei umgeleitet werden.</p>
<h2 id="benutzung-von-loggern-1">Benutzung von Loggern</h2>
<p>Alle Funktionen, die <em>Logger</em> unterstützten haben ein <code>L</code> im Namen:</p>
<ul>
<li><code>F_Log</code> wird zu <code>F_LogL</code></li>
<li><code>F_LogA1</code> wird zu <code>F_LogLA1</code></li>
<li>usw.</li>
</ul>
<p>Diese Funktionen haben an 2. Stelle eine zusätzlichen Inputparameter vom Typ <code>T_MaxString</code> für den <em>Logger</em>. Wenn mehrere Log-Meldungen im gleichen Baustein ausgegeben werden, lohnt es sich eine Konstante dafür zu definieren. Der geänderte Code aus dem letzten Schritt sind mit <em>Logger</em> jetzt so aus:</p>
<pre><code>PROGRAM MAIN
VAR CONSTANT
	sLogger		: STRING := 'MAIN';
END_VAR
VAR
	nCounter	: UINT;
	fbCountTime	: TON := (PT:=T#1S);
END_VAR
--------------------------------------------------------------
IF _TaskInfo[GETCURTASKINDEXEX()].FirstCycle THEN
	F_LogL(E_LogLevel.eInfo, sLogger, 'SPS Task gestartet.');
END_IF

fbCountTime(IN:=NOT fbCountTime.Q);
IF fbCountTime.Q THEN
	nCounter := nCounter + 1;
	F_LogLA1(E_LogLevel.eDebug, sLogger, 'Zähler geändert, neuer Wert {0}', nCounter);
END_IF

PRG_TaskLog.Call();
</code></pre>
<p>Der Code befindet sich im Beispielprojekt unter den Namen &quot;C_LogWithLogger&quot;.</p>
<h2 id="ausgabe-im-log">Ausgabe im Log</h2>
<p>Nachdem der geänderte Baustein geladen wurde, wird im Log-File in der dritten Spalte der <em>Logger</em> ausgegeben:</p>
<p><img src="assets/log3.png" alt="Logmeldung mit Logger"></p>
<h2 id="was-passiert-wenn-kein-logger-benutzt-wird">Was passiert wenn kein 'Logger' benutzt wird?</h2>
<p><em>Logger</em> sind ein integrierter Bestandteil von log4TC, aus diesen Grund wird intern immer ein <em>Logger</em> benutzt, auch wenn keiner angegeben wird. Der Logger in solchen Fällen ist in <code>Const.sGlobalLogger</code> definiert und hat den Wert <code>'_GLOBAL_'</code>.</p>
<h2 id="nächster-schritt">Nächster Schritt</h2>
<p><a href="context_usage.html">Integration von Context-Eigenschaften</a></p>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Help us on <a href="https://github.com/mbc-engineering/log4TC"><br><strong>github</strong></a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
