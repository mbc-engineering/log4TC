<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Benutzung von Loggern | Dokumentation mbc Log4Tc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Benutzung von Loggern | Dokumentation mbc Log4Tc ">
    <meta name="generator" content="docfx 2.52.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-127632729-2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-127632729-2');
    </script>
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="benutzung-von-loggern">Benutzung von Loggern</h1>

<h2 id="zweck-von-logger">Zweck von <em>Logger</em></h2>
<p>Rein technisch betrachtet ist ein <em>Logger</em> eine Bezeichnung für eine oder mehrere Log-Meldungen, das durch das gesamte Logging-System weitergereicht wird. Ein <em>Logger</em> kann daher z.B. von Filterplugins verwendet werden oder bei der Ausgabe mit geschrieben werden.</p>
<p>Wie genau und ob <em>Logger</em> benutzt werden, kann vom Entwickler selbst definiert werden. Bei allen grösseren Projekten hat sich folgende Richtlinie als Vorteil erwiesen:</p>
<p><em>Logger</em> kennzeichnen Bereiche einer Applikation, der Log-Meldungen zugeordnet werden. Ein Bereich einer Applikation ist z.B. ein Baustein, Methode oder Namensraum (bei Libraries) die mit einem hierarchisch aufgebauten Namen gekennzeichnet werden. Die einzelnen Teile eines solchen Namens werden durch einen Punkt &quot;.&quot; getrennt.</p>
<p>Beispiele:</p>
<ul>
<li>Eine Methode eines Libraries-Bausteins: <code>MyLib.PRG_Foo.Init</code> (<code>MyLib</code>=Librarynamen, <code>PRG_Foo</code>=Bautein, <code>Init</code>=Methode)</li>
<li>Ein Baustein in einem Subsystem: <code>Communication.FB_Send</code> (<code>Communication</code>=Subsystem, <code>FB_Send</code>=Baustein)</li>
</ul>
<p>Durch die hierarchiesche Gliederung können Log-Meldungen auch bei grossen Systemen mit Hunderten oder Tausenden Log-Meldungen schnell zugeordnet werden. Ebenso können z.B. auch einfach Meldungen eines Subsystems ausgefiltert oder in eine eigene Log-Datei umgeleitet werden.</p>
<h2 id="benutzung-von-loggern-1">Benutzung von Loggern</h2>
<p>Alle Funktionen, die <em>Logger</em> unterstützten haben ein <code>L</code> im Namen:</p>
<ul>
<li><code>F_Log</code> wird zu <code>F_LogL</code></li>
<li><code>F_LogA1</code> wird zu <code>F_LogLA1</code></li>
<li>usw.</li>
</ul>
<p>Diese Funktionen haben an 2. Stelle eine zusätzlichen Inputparameter vom Typ <code>T_MaxString</code> für den <em>Logger</em>. Wenn mehrere Log-Meldungen im gleichen Baustein ausgegeben werden, lohnt es sich eine Konstante dafür zu definieren. Der geänderte Code aus dem letzten Schritt sind mit <em>Logger</em> jetzt so aus:</p>
<pre><code>PROGRAM MAIN
VAR CONSTANT
	sLogger		: STRING := 'MAIN';
END_VAR
VAR
	nCounter	: UINT;
	fbCountTime	: TON := (PT:=T#1S);
END_VAR
--------------------------------------------------------------
IF _TaskInfo[GETCURTASKINDEXEX()].FirstCycle THEN
	F_LogL(E_LogLevel.eInfo, sLogger, 'SPS Task gestartet.');
END_IF

fbCountTime(IN:=NOT fbCountTime.Q);
IF fbCountTime.Q THEN
	nCounter := nCounter + 1;
	F_LogLA1(E_LogLevel.eDebug, sLogger, 'Zähler geändert, neuer Wert {0}', nCounter);
END_IF

PRG_TaskLog.Call();
</code></pre>
<p>Der Code befindet sich im Beispielprojekt unter den Namen &quot;C_LogWithLogger&quot;.</p>
<h2 id="ausgabe-im-log">Ausgabe im Log</h2>
<p>Nachdem der geänderte Baustein geladen wurde, wird im Log-File in der dritten Spalte der <em>Logger</em> ausgegeben:</p>
<p><img src="assets/log3.png" alt="Logmeldung mit Logger"></p>
<h2 id="was-passiert-wenn-kein-logger-benutzt-wird">Was passiert wenn kein 'Logger' benutzt wird?</h2>
<p><em>Logger</em> sind ein integrierter Bestandteil von log4TC, aus diesen Grund wird intern immer ein <em>Logger</em> benutzt, auch wenn keiner angegeben wird. Der Logger in solchen Fällen ist in <code>Const.sGlobalLogger</code> definiert und hat den Wert <code>'_GLOBAL_'</code>.</p>
<h2 id="nächster-schritt">Nächster Schritt</h2>
<p><a href="context_usage.html">Integration von Context-Eigenschaften</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © 2020 <br><strong>mbc</strong>-engineering GmbH</span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
